# 如何创建Bitmap
- 使用Bitmap类的静态方法
- 使用BitmapFactory的decodeXX静态方法
# 颜色配置与压缩方式
Bitmap中有两个内部枚举类：Config和CompressFormat
## Config
描述Bitmap是如何存儲像素信息，影响了图片质量（颜色深度）以及透明度的能力

|格式|描述|每个像素占用内存大小|
|--|--|--|
|ALPHA_8|颜色信息只由透明度组成|8位，即1字节|
|ARGB_4444|颜色信息由透明度、R、G、B组成，每部分占4位，共占16位|16位，即2字节|
|ARGB_8888|同上，但每部分占8位，共占32位，是Bitmap默认的配置，也最占空间|32位，即4字节|
|RGB_565|由R、G、B组成，分别占5、6、5位，共占16位|16位，即2字节|

注意：
1. Bitmap默认格式是ARGB_8888
2. 图片占用内存大小与图片颜色格式相关，计算：占用内存大小=图片宽×图片高×每个像素占用内存大小

做性能优化时可将Bitmap格式配置改为RGB_565，因为占用内存是默认格式的一半，但是要明确一点：RGB_565不支持透明度
## CompressFormat
描述将Bitmap用什么方式压缩
|压缩方式|描述|
|JPEG|表示用JPEG算法压缩，压缩后格式可以是.jpg或.jpeg，有损|
|PNG|表示用PNG算法压缩，压缩后格式是.png，无损|
|WEBP|表示用WebP算法压缩，压缩后格式是.webp，有损，质量相同的情况下，该格式体积要比JPEG小40%，但编码时长要比JPEG长8倍|

# 保存和转换
### Bitmap -> byte数组
```kotlin
  fun bitmapToByteArray(bitmap: Bitmap): ByteArray {
      val baos = ByteArrayOutputStream()
      bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos)
      return baos.toByteArray()
  }
```
### Bitmap -> 文件
```kotlin
    fun bitmapToFile(bitmap: Bitmap, file: File): Boolean {
        val baos = ByteArrayOutputStream()
        val fileOutputStream = FileOutputStream(file)
        return try {
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos)
            fileOutputStream.write(baos.toByteArray())
            true
        } catch (e: Exception) {
            e.printStackTrace()
            false
        } finally {
            baos.close()
            fileOutputStream.close()
        }
    }
```
# Bitmap文件的大小
分几种情况：
- Bitmap原始文件大小
- Bitmap压缩后保存到本地的大小
- Bitmap加载到内存中占用的大小

通常情况下，三者不相等
