所谓流式布局，就是类似淘宝/京东等APP搜索历史的样子，有了前面的学习，这个应该比较好实现，直接上代码
```java
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        //由于是重写ViewGroup来自定义View，所以注释掉之前测量的值
        //super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        //获取自身建议的宽度
        int myWidth = MeasureSpec.getSize(widthMeasureSpec);
        //上一个子View的宽度
        int lastViewWidth = 0;

        //测量完所有的子View后自身应该有多高
        int measureHeight = 0;

        //子View的数量
        int childCount = getChildCount();
        for (int i = 0; i < childCount; i ++){

            //获取到子View
            View childView = getChildAt(i);

            //测量并保存子View的尺寸
            measureChild(childView, widthMeasureSpec, heightMeasureSpec);

            //获取当前子View测量得到的宽度
            int childWidth = childView.getMeasuredWidth();

            //如果当前子View宽度 + 上一个子View宽度 > 自身的宽度
            if (childWidth + lastViewWidth > myWidth){
                //此时就要换行了
                measureHeight += childView.getMeasuredHeight();
                //并且换行后lastViewWidth的值就是第一个子View的宽度
                lastViewWidth = childView.getMeasuredWidth();
                i("换行 " + i + "    " + measureHeight);
            }else {
                //否则就只加上当前子View宽度就好
                lastViewWidth += childWidth;
            }
            //对最后一个子View处理，如果没做处理，则measureHeight的值只是
            //换行之前的值，而换行之后的高度没有加上，这就导致少显示一行
            //判断是否执行到最后一个子View，能始终保证加上最后一行的高度
            if (i == childCount - 1){
                measureHeight += childView.getMeasuredHeight();
            }
        }

        //最后保存自身应该有的宽度和高度
        setMeasuredDimension(widthMeasureSpec, measureHeight);
    }
    
    
    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        //当前子View左边位置
        int layoutLeft = l;
        //ViewGroup的高度
        int layoutHeight = 0;
        //获取ViewGroup测得的宽度
        int parentWidth = getMeasuredWidth();
        //获取子View的数量
        int childCount = getChildCount();
        for (int i = 0; i < childCount; i ++){

            //获取到子View
            View childView = getChildAt(i);

            //获取到子View测量得到的宽高
            int childWidth = childView.getMeasuredWidth();
            int childHeight = childView.getMeasuredHeight();

            //这里依旧判断，是否超出ViewGroup的宽度
            if (childWidth + layoutLeft > parentWidth){
                //如果超出就增加当前子View的高度
                layoutHeight += childHeight;
                //然后把下一行开始的子View左边位置设置为0
                //确保每次都能从x轴坐标为0开始布局
                layoutLeft = 0;
            }

            //布局（子View的左边，子View的顶边，子View的右边 = 左边 + 当前子View的宽度，子View的底边 = 测得的高度 + 当前子View的高度）
            childView.layout(layoutLeft, layoutHeight, layoutLeft + childWidth, layoutHeight + childHeight);
            //每次布局后，需要把子View的左边加上当前子View的宽度，作为下一个子View左边的起始位置
            layoutLeft += childWidth;
        }
    }
```
写的很清楚明白了，直接在xml中用即可
```xml
    <com.eric.handlerstudy.FlowLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <TextView
            android:text="200"
            android:gravity="center"
            android:layout_width="200dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="20"
            android:gravity="center"
            android:layout_width="20dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="60"
            android:gravity="center"
            android:layout_width="60dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="100"
            android:gravity="center"
            android:layout_width="100dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="120"
            android:gravity="center"
            android:layout_width="120dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="200"
            android:gravity="center"
            android:layout_width="200dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="60"
            android:gravity="center"
            android:layout_width="60dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="60"
            android:gravity="center"
            android:layout_width="60dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="60"
            android:gravity="center"
            android:layout_width="60dp"
            android:layout_height="wrap_content"/>
        <TextView
            android:text="60"
            android:gravity="center"
            android:layout_width="60dp"
            android:layout_height="wrap_content"/>
    </com.eric.handlerstudy.FlowLayout>
```
不过我觉得还可以优化一下，毕竟遍历两次也算有点耗时了

OK，这篇就到这里
